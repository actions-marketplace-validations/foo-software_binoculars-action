"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const lighthouse_1 = require("lighthouse");
const page_functions_1 = __importDefault(require("lighthouse/lighthouse-core/lib/page-functions"));
function collectTitleElement() {
    const [node] = getElementsInDocument('title') || [];
    if (node instanceof HTMLTitleElement) {
        return {
            text: node.innerText,
        };
    }
    return {
        text: null,
    };
}
class TitleElement extends lighthouse_1.Gatherer {
    async afterPass(passContext) {
        const driver = passContext.driver;
        const expression = `(() => {
      ${page_functions_1.default.getElementsInDocumentString};

      return (${collectTitleElement})();
    })()`;
        const result = await driver.evaluateAsync(expression, {
            useIsolation: true,
        });
        return result;
    }
}
exports.default = TitleElement;
//# sourceMappingURL=title-element.js.map